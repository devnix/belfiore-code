name: "coding standards"

on:
  pull_request: ~
  push: ~

jobs:
  coding-standards:
    name: "Coding standards"
    runs-on: "ubuntu-latest"
    strategy:
      matrix:
        php: ["8.1", "8.2", "8.3"]
    steps:
      - name: "Checkout code"
        uses: "actions/checkout@v5"

      - name: "Set up PHP"
        uses: "shivammathur/setup-php@v2"
        with:
          php-version: ${{ matrix.php }}
          ini-values: memory_limit=-1
          tools: composer:v2, cs2pr
          extensions: intl, json

      - name: "Install dependencies"
        run: "composer install --prefer-dist --no-progress --no-suggest"

      - name: "PHP CS Fixer"
        run: "vendor/bin/php-cs-fixer fix --diff --dry-run"

      - name: "Rector"
        run: "vendor/bin/rector process --dry-run"